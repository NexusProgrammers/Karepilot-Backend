"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = require("express");
const mobileController_1 = require("../../controllers/mobileController");
const auth_1 = require("../../middlewares/auth");
const upload_1 = require("../../middlewares/upload");
const mobileUserSchemas_1 = require("../../validations/mobileUserSchemas");
const adminUser_1 = require("../../models/adminUser");
const utils_1 = require("../../utils");
const mobileRouter = (0, express_1.Router)();
mobileRouter.post("/register", (0, utils_1.validate)(mobileUserSchemas_1.mobileUserRegistrationSchema), mobileController_1.registerMobileUser);
mobileRouter.post("/verify-email", (0, utils_1.validate)(mobileUserSchemas_1.emailVerificationSchema), mobileController_1.verifyEmail);
mobileRouter.post("/resend-verification", (0, utils_1.validate)(mobileUserSchemas_1.resendVerificationSchema), mobileController_1.resendVerificationCode);
mobileRouter.post("/login", (0, utils_1.validate)(mobileUserSchemas_1.mobileUserLoginSchema), mobileController_1.loginMobileUser);
mobileRouter.use(auth_1.authenticateMobile);
mobileRouter.get("/profile", mobileController_1.getMobileProfile);
mobileRouter.patch("/profile", upload_1.uploadSingleImage, (0, utils_1.validate)(mobileUserSchemas_1.mobileUserUpdateSchema), mobileController_1.updateMobileProfile);
mobileRouter.put("/change-password", (0, utils_1.validate)(mobileUserSchemas_1.mobilePasswordChangeSchema), mobileController_1.changeMobilePassword);
mobileRouter.get("/admin/users", auth_1.authenticateAdmin, (0, utils_1.validate)(mobileUserSchemas_1.mobileUserQuerySchema, "query"), (0, auth_1.requireRole)([adminUser_1.AdminRole.ADMIN, adminUser_1.AdminRole.MANAGER]), mobileController_1.getAllMobileUsers);
mobileRouter.get("/admin/users/:id", auth_1.authenticateAdmin, (0, utils_1.validate)(mobileUserSchemas_1.mobileUserIdParamSchema, "params"), (0, auth_1.requireRole)([adminUser_1.AdminRole.ADMIN, adminUser_1.AdminRole.MANAGER]), mobileController_1.getMobileUserById);
mobileRouter.put("/admin/users/:id/status", auth_1.authenticateAdmin, (0, utils_1.validate)(mobileUserSchemas_1.mobileUserIdParamSchema, "params"), (0, auth_1.requireRole)([adminUser_1.AdminRole.ADMIN]), mobileController_1.updateMobileUserStatus);
exports.default = mobileRouter;
//# sourceMappingURL=mobile.js.map